/*! jQueryPlugin - v1.0.0 - 2014-01-13 */!function(a){var b=function(b,c,d){if(this.$elem=a(b),this.$target=a(c),this.options=a.extend(!0,{},a.fn.autoRefresh.defaults,d),this.$switchor=this.$elem.find(this.options.switchor),!this.$switchor.length)throw new Error("no switchor defined!");this.options.interval.match(/\d{1,4}/gi)?this.interval=this.options.interval:(this.$interval=a(this.options.interval),this.interval=this.$interval.val()),this.interval||(this.interval="30"),this.countDown=this.interval};b.prototype={constructor:b,loop:function(){if(this.countDown)this.setCdText(this.countDown),this.countDown=this.countDown-1;else{var a=this.$target.find(this.options.selector+":first").attr("id"),b={type:"latest",id:a};this.load(b,"prepend"),this.countDown=this.interval}},setCdText:function(b){if(this.options.countDown){var c=this.$elem.find(".a-cd");c.length||(c=a('<span class="a-cd"></span>').appendTo(this.$elem)),c.text(" "+b+"秒后刷新..")}},setInterval:function(a){this.interval=a,this.countDown=a},start:function(){var b=this;a.timers.push(setInterval(a.proxy(this.loop,b),1e3))},pause:function(){clearInterval(a.timers.pop())},scrollEventBinding:function(a){var b=a.target.scrollHeight,c=a.target.offsetHeight,d=a.target.scrollTop,e=b-c-d;if(30>e){var f=this.$target.find(this.options.selector+":last").attr("id"),g={type:"earliest",id:f};this.load(g,"append")}},load:function(b,c){var d=this,e="",f={},g=a("#a-hdiv"),h=a.Event("refresh"),i=function(){var b=a(this),g=b.html().trim(" ");switch(c){case"prepend":d.$target.prepend(b.html());break;case"append":d.$target.append(b.html())}g.length||"append"!=c?f.length&&f.html(e):d.$target.off("scroll.load"),b.empty()};if(g.length||(g=a('<div id="a-hdiv" style="display:none"></div>').appendTo("body")),this.$elem.trigger(h),this.options.easyloadapi){var j=a(this.options.easyloadapi).data("easyLoad");this.options.load&&g.load(this.options.url,a.extend({},j.getParams(),b),i)}else g.load(this.options.url)}};var c=a.fn.autoRefresh;a.fn.autoRefresh=function(c,e){return this.each(function(){var f=a(this),g=f.data("autoRefresh");e=a.extend({},f.data(),e);try{g||f.data("autoRefresh",g=new b(this,c,e))}catch(h){d(h)}g.$switchor.on("change",function(){return 0==this.checked?g.pause():g.start()}),g.$interval.length&&g.$interval.on("change",function(){g.setInterval(this.value)}),g.options.scrollLoad&&g.$target.off("scroll.load").on("scroll.load",a.proxy(g.scrollEventBinding,g)),g.options.easyloadapi&&a(document).on("easyLoad",g.options.easyloadapi,function(){g.$target.off("scroll.load").on("scroll.load",a.proxy(g.scrollEventBinding,g))}),g.options.refreshOnStart&&g.start()})},a.fn.autoRefresh.defaults={switchor:".a-sw",interval:".a-intvl",countDown:!0,url:"",load:!0,easyloadapi:"",selector:"li .box-answer",scrollLoad:!0,refreshOnStart:!0},a.fn.autoRefresh.noConflict=function(){return a.fn.autoRefresh=c,this},a(window).on("load",function(){a("[data-role*=autoRefresh]").each(function(){var b=a(this),c=(b.data(),b.data("target"));b.autoRefresh(c,b.data())})});var d=function(a){window.console&&window.console.log&&console.error("jquery.autoRefresh.js-"+a)},e=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.trim||(String.prototype.trim=e)}(jQuery),!function(a){var b=function(b,c){this.$element=a(b),this.options=a.extend({},a.fn.checkAll.defaults,c)};b.prototype={constructor:b,setChecked:function(b){var c=a(this.options.group);"checkbox"==c[0].type||(c=c.find("input[type=checkbox]"));var d=b.target.checked;c.each(function(){this.disabled||(this.checked=d)}),this.$group=c},setCheckAll:function(){var b=a(this.options.group),c=!0;"checkbox"==b[0].type||(b=b.find("input[type=checkbox]"));for(var d=0;d<b.length;d++)c=c&&b[d].checked;this.$element[0].checked=c},count:function(){var b=a(this.options.group),c=0,d=a(this.options.countElem),e=this.options.countText;b.each(function(){this.checked&&c++}),d.length||(d=a('<span id="count"></span>')).appendTo("body"),e=e.replace("{count}",c.toString()),d.text(e)}};var c=a.fn.checkAll;a.fn.checkAll=function(c){return this.each(function(){var d=a(this),e=d.data("checkAll");"string"==typeof c&&(c={group:c}),c=a.extend({},d.data(),c),e||d.data("checkAll",e=new b(this,c)),c.count&&e.count(),d.on("change.checkAll",a.proxy(e.setChecked,e)),a(document).on("change.checkAll",e.options.group+" input[type=checkbox]",a.proxy(e.setCheckAll,e)),c.count&&d.on("change.checkAll",a.proxy(e.count,e)),c.count&&a(group).on("change.checkAll","input[type=checkbox]",a.proxy(e.count,e))})},a.fn.checkAll.defaults={count:!1,countElem:"#count",countText:"{count} options are checked"},a.fn.checkAll.noConflict=function(){return a.fn.checkAll=c,this};a(window).on("load",function(){a("[data-role=checkAll]").each(function(){var b=a(this);b.checkAll(b.data())})})}(jQuery),!function(a){var b=function(b,c){this.options=a.extend({},a.fn.chkMerge.defaults,c),this.$elem=a(b),this.$form=this.$elem.closest("form")};b.prototype={constructor:b,setGroup:function(){var b=a(this.options.group);if(b[0].tagName.match(/^input$/gi))this.$group=b;else{switch(this.options.valuetag){case"text":b=b.find("input[type=text],input"),group=b.get();break;case"checkbox":case"label":b=b.find("input[type=checkbox]"),group=b.get()}this.$group=a(group)}},fEventBinding:function(b){var c=this;if(!this.options.event||"submit"==this.options.event&&!this.options.trigger){var e=a("[class*=chkMerge-form]").length,f="chkMerge-form"+(e+1),g=this.$form.attr("class")&&this.$form.attr("class").match("chkMerge-form");g&&(f="chkMerge-form"+e),g||(this.$form=this.$form.addClass(f));var h="."+f;this.options.trigger=h}this.options.trigger||d(new Error("Unexpected form selector, define an id or class attribute instead!")),a(document).on(this.options.event,this.options.trigger,function(){c.setGroup();var d=a(this),e=a.Event("merge"),f=c.mergeValue();"text"==c.options.valuetag?b.val(f.unchecked):b.val(f[c.options.ref]),d.trigger(e)})},getValue:function(b){var c=a(b),d="",e=this.options.valuetag;switch(e){case"label":d=c.closest("label").text().trim();break;case"checkbox":d=c.data("value");break;case"text":c.val()&&(d=c.val())}return d},mergeValue:function(){var a=this,b={},c=[],d=[],e=this.options.split;return this.$group.each(function(){var b=a.getValue(this);"text"==a.options.valuetag||this.checked?c.push(b):d.push(b),"text"==a.options.valuetag&&b&&d.push(b)}),b.checked=c.join(e),b.unchecked=d.join(e),b},setMerged:function(){this.setGroup();var b=a.Event("merge"),c=this.mergeValue();"text"==this.options.valuetag?this.$elem.val(c.unchecked):this.$elem.val(c[this.options.ref]),this.$elem.trigger(b)}};var c=a.fn.chkMerge;a.fn.chkMerge=function(c,d){return this.each(function(){var e=a(this),f=e.data("chkMerge");"string"==typeof c&&(c={group:c}),(d===!1||"unchecked"===d)&&(d=void 0,c.ref="unchecked"),c=a.extend({},e.data,c),f||e.data("chkMerge",f=new b(this,c)),d||f.fEventBinding(e),"merge"==d&&f.setMerged()})},a.fn.chkMerge.defaults={split:",",valuetag:"checkbox",ref:"checked",event:"submit",trigger:""},a.fn.chkMerge.noConflict=function(){return a.fn.chkMerge=c,this};var d=function(a){window.console&&window.console.log&&console.error("jquery.chkMerge.js-"+a)};a(window).on("load",function(){a("[data-role=chkMerge]").each(function(){var b=a(this);b.chkMerge(b.data())})});var e=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.trim||(String.prototype.trim=e)}(jQuery),!function(a){var b=function(b,c,d){this.$element=a(b),this.$form=a(c),this.options=a.extend({},a.fn.easyForm.defaults,d)};b.prototype={constructor:b,setFormAttr:function(){var a=this.options.action,b=this.options.method;a&&this.$form.attr("action",a),b&&this.$form.attr("method",b)},setDisabled:function(){var a=[],b=this.$form.find("[name]"),c=[];return this.options.disabled&&(a=this.options.disabled.split(" ")),b.each(function(){for(var b=0;b<a.length;b++){a[b]==this.name&&(this.disabled="disabled"),c.push(a[b]);break}}),c},setEnabled:function(a){for(var b=0;b<a.length;b++){var c="[name="+a[b]+"]";this.$form.find(c).attr("disabled",!1)}}},a.fn.easyForm=function(c){return this.each(function(){var d=this,e=a(this),f=e.closest("form").get(),g=e.data("easyForm");c=a.extend({},e.data(),c),g||e.data("easyForm",g=new b(this,f,c)),g.$element.on(g.options.event,function(){g.setFormAttr();var b=g.setDisabled();g.options.ajax?(d.type="button",a.ajax(g.options.action,{type:g.options.method,data:g.$form.serialize()}),g.setEnabled(b)):g.$form.submit()})})},a.fn.easyForm.defaults={event:"click.easyForm",method:"POST",ajax:!1},a.fn.easyForm.Constructor=b;var c=a.fn.easyForm;a.fn.easyForm.noConflict=function(){return a.fn.easyForm=c,this};a(window).on("load",function(){var b=a("[data-role=easyForm]");b.each(function(){var b=a(this);b.easyForm(b.data())})})}(jQuery),!function(a){var b="13",c=function(b,c,d){this.options=a.extend({},a.fn.easyLoad.defaults,d),this.$el=a(b),this.$form=a(c)};c.prototype={constructor:c,getPage:function(b){var c=a(this.options.pgApi),d=c.data("pagination").options.page;return b&&(d=a(b).attr("href")),d},getParams:function(){var a={};return this.$form.length&&(a=this.$form.serializeArray().toObj()),a},loadPage:function(b,c){var d=this;this.$el.load(this.options.url,b,function(){var b=a(this);a.Event("easyLoad"),b.trigger("easyLoad");var e=d.$el.find(d.options.pgApi);e.pagination(e.data()),c&&c()})},pgEventBinding:function(){var b=this,c=this.options.pgApi+" a";this.$el.on("click",c,function(c){var d=a(this);if(c.preventDefault(),!d.closest("li").attr("class")||!d.closest("li").attr("class").match("disabled")){var e=b.getPage(this),f=b.getParams();b.loadPage(a.extend({},f,{page:e}))}}).on("click",".input-append .btn",function(){var c=a(this),d=c.prev("input[type=text]").val(),e=b.getParams(),f=b.$el.find(b.options.pgApi).data("pagination"),g=f.options.total;d&&d>0&&g>=d?b.loadPage(a.extend({},e,{page:d})):alert("页码数有误！")}).on("keydown",".input-append input[type=text]",function(c){if("13"==c.keyCode){var d=a(this),e=d.val(),f=b.getParams(),g=b.$el.find(b.options.pgApi).data("pagination"),h=g.options.total;e&&e>0&&h>=e?b.loadPage(a.extend({},f,{page:e})):alert("页码数有误！")}})},sEventBinding:function(){var c=this;this.$form.on("click").on("click","button",function(b){b.preventDefault();var d=c.getParams();c.loadPage(a.extend({},d,{page:"1"}))}).on("change","input[type=radio],input[type=checkbox]",function(){var b=c.getParams();c.loadPage(a.extend({},b,{page:"1"}))}).on("keydown","input",function(d){if(d.keyCode==b){d.preventDefault();var e=c.getParams();c.loadPage(a.extend({},e,{page:"1"}))}})}},a.fn.easyLoad=function(b,d){return this.each(function(){var e=a(this),f=e.data("easyLoad");d=a.extend({},e.data(),d),f||e.data("easyLoad",f=new c(this,b,d));var g=f.getParams(),h={};h[f.options.exparam]=f.options.exvalue,f.loadPage(a.extend({},g,h)),"load"==b||f.sEventBinding(),"load"==b||f.pgEventBinding()})},a.fn.easyLoad.defaults={url:"",pgApi:"[data-role=pagination]",exparam:"page",exvalue:"1"};var d=a.fn.easyLoad;a.fn.easyLoad.noConflict=function(){return a.fn.easyLoad=d,this};a(document).ready(function(){var b=a("[data-role=easyLoad]");b.each(function(){var b=a(this),c=b.data("form");b.easyLoad(c,b.data())})});var e=function(){for(var a=this.concat(),b={},c={};b=a.pop();)c[b.name]=b.value;return c};Array.prototype.toObj||(Array.prototype.toObj=e)}(jQuery),function(a){var b=function(b,c,d){this.$element=a(b),this.$target=a(d),this.options=a.extend({},a.fn.pagination.defaults,c),this.create(this.options)};b.prototype={constructor:b,disable:function(a){return a.attr("class","disabled"),a.find("a").removeAttr("href"),a},active:function(a){return a.attr("class","active"),a.find("a").removeAttr("href"),a},setPage:function(a,b,c){return c=c.replace("{page}",b),a.find("a").attr("href",c),a.find("a").data("pageNo",b),a},create:function(b){var c=parseInt(b.page),f=parseInt(b.total),g=parseInt(b.length),h=[],i=b.href;try{h=e(c,1,f,g)}catch(j){return d(j),void 0}var k=a('<li><a href ="">'+b.prev+"</a></li>"),l=a('<li><a href ="">'+b.next+"</a></li>");this.$element.empty(),k=1>=c?this.disable(k):this.setPage(k,c-1,i),this.$element.append(k);for(var m=0;m!=h.length;m++){var n=a('<li><a href="">'+h[m]+"</a><li>");n=h[m]==c?this.active(n):this.setPage(n,h[m],i),this.$element.append(n)}l=c>=f?this.disable(l):this.setPage(l,c+1,i),this.$element.append(l)},ajaxPager:function(b,c){var d=this;b&&a.get(b,function(a){d.$target.html(a),d.options.page=c,d.create(d.options)})}},a.fn.pagination=function(c,d){return this.each(function(){var e=a(this),f=e.data("pagination");f?f.create(a.extend({},f.options,c)):e.data("pagination",f=new b(this,c,d)),f.options.ajax&&e.on("click","a",function(b){var c=a(b.target),d=c.data("pageNo");b.preventDefault(),f.ajaxPager(c.attr("href"),d)})})},a.fn.pagination.defaults={target:"",total:0,page:0,prev:"上一页",next:"下一页",length:2,href:"page/{page}",ajax:!1},a.fn.pagination.Constructor=b;var c=a.fn.pagination;a.fn.pagination.noConflict=function(){return a.fn.pagination=c,this},a(window).load(function(){a("[data-role=pagination]").each(function(){var b=a(this),c=b.data("target");b.pagination(b.data(),c)})});var d=function(a){window.console&&window.console.log&&console.error("jquery.pagination.js-"+a)},e=function(a,b,c,d){if(!c)throw new Error("empty page!");if(b>c||b>a||a>c)throw new Error("invalid arguments!");d||(d=2);var e=[],f=2*d+1,g=a-d-b,h=a+d-c,i=0>g?g:0,j=h>0?h:0,k=i+j;a=a-d-k;for(var l=0;f>l;l++)a>=b&&c>=a&&e.push(a),a++;return e}}(jQuery),function($){var SmartAt=function(a,b,c){switch(this.$group=$(a).find("input[type=checkbox]"),this.$target=$(b),this.options=$.extend({},$.fn.smartAt.defaults,c),this.options.split){case" ":this.regExp=/^(@[\w\u4e00-\u9fa5-]+[\s:：])+/gi;break;case",":this.regExp=/^(@[\w\u4e00-\u9fa5-]+[,，:：])+/gi;break;case";":this.regExp=/^(@[\w\u4e00-\u9fa5-]+[;；:：])+/gi}};SmartAt.prototype={constructor:SmartAt,getValue:function(a){var b="",c=this.options.valueTag;switch(c){case"label":b=a.closest("label").text().trim();break;case"checkbox":b=a.val()}return b},getChecked:function(){var a=this,b=[];return this.$group.each(function(){var c=$(this);this.checked&&b.push("@"+a.getValue(c))}),b},setChecked:function(atVal){var that=this;this.$group.each(function(){var $this=$(this),regVal=eval("/@"+that.getValue($this)+"["+that.options.split+":：]/ig");this.checked=atVal.match(regVal)?!0:!1})},getText:function(){var a=this.$target.val(),b="";a&&a.match(this.regExp)&&(b=a.match(this.regExp)[0]);var c=a.replace(b,"");return{toAt:b,content:c}},setTextAt:function(a){var b=this.options.split,c=this.getText(),d="";a.length&&(d=a.join(b)+":"),this.$target.val(d+c.content),this.options.autoFocus&&this.$target.focus()}},$.fn.smartAt=function(a,b){var c=$(a),d=c.data("smartAt");return d||c.data("smartAt",new SmartAt(this,a,b)),this.each(function(){var d=$(this),e=d.data("smartAt");e||d.data("smartAt",e=new SmartAt(this,a,b)),d.on("change",function(){var a=$(this),b=a.data("smartAt"),c=b.getChecked();b.setTextAt(c)}),c.on("keyup",function(a){var b=$(a.target),c=b.data("smartAt"),d=c.getText().toAt;c.setChecked(d)}).focus(function(a){var b=a.target;b.selectionStart=b.selectionEnd=b.textLength})})},$.fn.smartAt.defaults={valueTag:"label",autoFocus:!0,split:" "},$.fn.smartAt.Constructor=SmartAt;var old=$.fn.smartAt;$.fn.smartAt.noConflict=function(){return $.fn.smartAt=old,this},$(window).on("load",function(){$("[data-role=smartAt]").each(function(){var a=$(this),b=a.data("target");a.smartAt(b,a.data())})});var debug=function(a){window.console&&window.console.log&&console.error("jquery.easyForm.js-"+a)},trimFix=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.trim||(String.prototype.trim=trimFix)}(jQuery),function(a){var b=function(b,c,d){this.options=a.extend({},a.fn.smartTag.defaults,d),this.$element=a(b),this.$target=a(c)};b.prototype={constructor:b,initOptions:function(){var b=this.options.dataSource,c=this.$target.find(this.options.tagsOption);if(b.length)for(var d=0;d<b.length;d++){var e=a('<span class="label">'+b[d]+"</span>");c.each(function(){c.text().trim()==b[d]||this.$element.append(e)})}else{var f=this.$element.find(this.options.tagsOption);f.each(function(){var b=a(this);c.each(function(){var c=a(this);b.text().trim()==c.text().trim()&&b.remove()})})}},getValue:function(b){if(b.tagName.match(/^I$/gi)){var c=a(b).closest(".label");return c.text().trim()}return a(b).text().trim()},addTag:function(b){{var c=a(b);c.text().trim()}c.remove(),this.$target.append(c)},removeTag:function(b){{var c=a(b).closest("button");c.text().trim()}c.remove(),this.$element.append(c)},addRequest:function(b,c,d){var e=this,f=this.options.add;f&&a.post(f,c,function(a){1==a.success&&e.addTag(b),d&&d()},"json")},removeRequest:function(b,c,d){var e=this,f=this.options.remove;f&&a.post(f,c,function(a){1==a.success&&e.removeTag(b),d&&d()},"json")},eventBinding:function(){var b=this;this.$element.off("click").on("click","button",this.options.tagsOption,function(c){var d=b.getValue(this),e=a(c.target);b.addRequest(e,{tag:d})}),this.$target.off("click").on("click","button",function(c){var d=b.getValue(this),e=a(c.target);b.removeRequest(e,{tag:d})})}};var c=a.fn.smartTag;a.fn.smartTag=function(c,d){return this.each(function(){var e=a(this),f=e.data("smartTag");d=a.extend({},e.data(),d),f||e.data("smartTag",f=new b(this,c,d)),f.initOptions(),f.eventBinding()})},a.fn.smartTag.defaults={dataSource:[],tagsOption:".smartTag",ajax:"true",type:"post",remove:"",add:""},a.fn.smartTag.Constructor=b,a.fn.smartTag.noConflict=function(){return a.fn.smartTag=c,this};a(window).on("load",function(){a("[data-role=smartTag]").each(function(){var b=a(this);b.smartTag(b.data("target"),b.data())})}),a(window).on("easyLoad",function(){a("[data-role=smartTag]").each(function(){var b=a(this),c=b.data("smartTag");c||b.smartTag(b.data("target"),b.data())})});var d=function(){return this.replace(/(^\s*)|(\s*$)/g,"")};String.prototype.trim||(String.prototype.trim=d)}(jQuery);